"""
2ë‹¨ê³„ ë¶„ë¥˜ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸
"""

import sys
import os
sys.path.append(os.path.dirname(os.path.abspath(__file__)))

from chatbot.core.two_stage_classifier import two_stage_classifier

def test_two_stage_classifier():
    """2ë‹¨ê³„ ë¶„ë¥˜ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸"""
    
    # í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë“¤
    test_cases = [
        {
            "name": "ëª…í™•í•œ ì±„ìš©ê³µê³  (1ì°¨ì—ì„œ í™•ì •)",
            "text": "í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìë¥¼ ëª¨ì§‘í•©ë‹ˆë‹¤. Reactì™€ TypeScript ê²½í—˜ì´ 2ë…„ ì´ìƒì¸ ë¶„ì„ ìš°ëŒ€í•©ë‹ˆë‹¤. ì´ë ¥ì„œì™€ ìê¸°ì†Œê°œì„œë¥¼ ì œì¶œí•´ì£¼ì„¸ìš”. ì—°ë´‰ì€ 3000ë§Œì›ë¶€í„° ì‹œì‘í•©ë‹ˆë‹¤."
        },
        {
            "name": "ì• ë§¤í•œ ì±„ìš©ê³µê³  (2ì°¨ í•„ìš”)",
            "text": "í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì ëª¨ì§‘ ê³µê³ ì…ë‹ˆë‹¤. Reactì™€ Typescriptë¥¼ í™œìš©í•œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ ê²½í—˜ì´ 2ë…„ ì´ìƒì¸ ë¶„ì„ ìš°ëŒ€í•˜ë©°, ì‚¬ìš©ì ê²½í—˜(UX) ê°œì„ ì— ê´€ì‹¬ì´ ë§ê³  ì„¸ì‹¬í•œ UI êµ¬í˜„ ëŠ¥ë ¥ì„ ê°–ì¶˜ ë¶„ì„ ì°¾ê³  ìˆìŠµë‹ˆë‹¤. ì• ìì¼(Agile) ê°œë°œ í™˜ê²½ì— ì ì‘ë ¥ì´ ì¢‹ê³ , íŒ€ ë‚´ í˜‘ì—… ë° ì½”ë“œ ë¦¬ë·°ì— ì ê·¹ì ìœ¼ë¡œ ì°¸ì—¬í•  ìˆ˜ ìˆëŠ” ë¶„ì´ë©´ ë”ìš± ì¢‹ìŠµë‹ˆë‹¤. ìë°”ìŠ¤í¬ë¦½íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë° ìµœì‹  íŠ¸ë Œë“œì— ëŒ€í•œ ì´í•´ë„ê°€ ë†’ì€ ì§€ì›ìë¥¼ í™˜ì˜í•©ë‹ˆë‹¤."
        },
        {
            "name": "ì¼ë°˜ ëŒ€í™”",
            "text": "ì•ˆë…•í•˜ì„¸ìš”! ì˜¤ëŠ˜ ë‚ ì”¨ê°€ ì •ë§ ì¢‹ë„¤ìš”. ë­í•˜ê³  ê³„ì„¸ìš”?"
        },
        {
            "name": "ê¸°ìˆ  ì§ˆë¬¸",
            "text": "Reactì™€ Vue ì¤‘ì—ì„œ ì–´ë–¤ ê²ƒì´ ë” ì¢‹ì„ê¹Œìš”? ê°ê°ì˜ ì¥ë‹¨ì ì„ ì•Œë ¤ì£¼ì„¸ìš”."
        },
        {
            "name": "ê°„ë‹¨í•œ ì±„ìš© ë¬¸ì˜",
            "text": "ê°œë°œì ì—°ë´‰ì´ ì–¼ë§ˆë‚˜ ë˜ë‚˜ìš”?"
        }
    ]
    
    print("ğŸš€ 2ë‹¨ê³„ ë¶„ë¥˜ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ ì‹œì‘\n")
    
    for i, test_case in enumerate(test_cases, 1):
        print(f"ğŸ“‹ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ {i}: {test_case['name']}")
        print(f"ğŸ“ ì…ë ¥ í…ìŠ¤íŠ¸: {test_case['text']}")
        print("-" * 80)
        
        # 2ë‹¨ê³„ ë¶„ë¥˜ ì‹¤í–‰
        result = two_stage_classifier.classify_text(test_case['text'])
        
        print(f"âœ… ë¶„ë¥˜ ê²°ê³¼:")
        print(f"   ì±„ìš©ê³µê³  ì—¬ë¶€: {result['is_recruitment']}")
        print(f"   ì‹ ë¢°ë„: {result['confidence']:.2f}")
        print(f"   ì‚¬ìš©ëœ ë‹¨ê³„: {result['stage']}")
        print(f"   1ì°¨ ì ìˆ˜: {result.get('first_stage_score', 'N/A')}")
        
        if result['fields']:
            print(f"   ì¶”ì¶œëœ í•„ë“œ:")
            for key, value in result['fields'].items():
                print(f"     {key}: {value}")
        
        print("=" * 80)
        print()

if __name__ == "__main__":
    test_two_stage_classifier()
